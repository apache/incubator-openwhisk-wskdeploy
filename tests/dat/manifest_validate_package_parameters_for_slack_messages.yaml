
packages:
    SlackPackage:
        # inputs for deployment
        inputs:
            slack_username:
                type: string
                description: "Slack User Name"
                required: true
                value: ${SLACK_USERNAME}
            slack_url:
                type: string
                description: "Slack Webhook URL"
                required: true
                value: ${SLACK_URL}
            slack_channel:
                type: string
                description: "Slack Channel"
                required: true
                value: ${SLACK_CHANNEL}
            message:
                type: string
                description: "Slack Message"
                required: false
                default: "Hello Whiskers"
            slack_package:
                type: string
                description: "Slack Package"
                required: true
                default: "slack-package-to-post-messages"
        dependencies:
            slack-package-to-post-messages:
                location: /whisk.system/slack
                inputs:
                    username: ${SLACK_USERNAME}
                    url: ${SLACK_URL}
                    channel: ${SLACK_CHANNEL}
        actions:
            post-to-slack:
                function: ../usecases/slack/actions/post-to-slack.js
                runtime: nodejs:6
                inputs:
                    message:
                        type: string
                        description: message to post on slack
                    slack_package:
                        type: string
                        description: slack package name
        triggers:
            everyhour:
                feed: /whisk.system/alarms/alarm
        rules:
            post-to-slack-every-hour:
                action: post-to-slack
                trigger: everyhour